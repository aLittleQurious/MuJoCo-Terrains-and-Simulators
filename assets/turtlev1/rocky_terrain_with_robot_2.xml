<mujoco model="rocky_terrain_with_robot">
    <compiler angle="degree" coordinate="local" inertiafromgeom="true"/>
    <option integrator="RK4" timestep="0.01"/>

    <!-- Custom initial positions -->
    <custom>
        <numeric data="0.0 0.0 0.55 1.0 0.0 0.0 0.0 0.0 1.0 0.0 -1.0 0.0 -1.0 0.0 1.0" name="init_qpos"/>
    </custom>

    <!-- Defaults for joints and geoms -->
    <default>
        <joint armature="1" damping="1" limited="true"/>
        <geom conaffinity="0" condim="3" density="5.0" friction="1 0.5 0.5" margin="0.01" rgba="0.8 0.6 0.4 1"/>
    </default>

    <!-- Assets: Height field and robot meshes -->
    <asset>
        <!-- Rocky terrain height field -->
        <hfield name="rocky_terrain" size="2 2 0.001 0.05" file="rocky_terrain.png"/>

        <!-- Robot meshes -->
        <mesh name="base_link" file="base_link.STL"/>
        <mesh name="backrightlink" file="backrightlink.STL"/>
        <mesh name="backleftlink" file="backleftlink.STL"/>
        <mesh name="frontrighthiplink" file="frontrighthiplink.STL"/>
        <mesh name="frontrightflipperlink" file="frontrightflipperlink.STL"/>
        <mesh name="frontlefthiplink" file="frontlefthiplink.STL"/>
        <mesh name="frontleftflipperlink" file="frontleftflipperlink.STL"/>

        <!-- Textures and materials -->
        <texture builtin="gradient" height="100" rgb1="1 1 1" rgb2="0 0 0" type="skybox" width="100"/>
        <texture builtin="checker" height="100" name="texplane" rgb1="0 0 0" rgb2="0.8 0.8 0.8" type="2d" width="100"/>
        <material name="MatPlane" reflectance="0.5" shininess="1" specular="1" texrepeat="60 60" texture="texplane"/>
    </asset>

    <!-- World definition -->
    <worldbody>
        <!-- Lighting -->
        <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1"/>

        <!-- Ground plane -->
        <geom conaffinity="1" condim="3" material="MatPlane" name="floor" pos="0 0 0" rgba="0.8 0.9 0.8 1" size="2 2 4" type="plane"/>

        <!-- Rocky terrain -->
            <geom name="rock1" type="box" size="0.01 0.02 0.03" pos="-5 -5 0.3" quat="0.707 0 0.707 0" rgba="0.5 0.4 0.3 1"/>
            <geom name="rock2" type="box" size="0.8 0.6 0.4" pos="-4 -3 0.4" quat="0.923 0.382 0 0" rgba="0.4 0.3 0.2 1"/>
            <geom name="rock3" type="box" size="1 0.7 0.3" pos="-3 -6 0.3" quat="0.5 0.5 0.5 0.5" rgba="0.6 0.5 0.4 1"/>
            <geom name="rock4" type="box" size="0.9 0.5 0.5" pos="2 2 0.5" quat="0.707 0.707 0 0" rgba="0.5 0.3 0.3 1"/>
            <geom name="rock5" type="box" size="1.2 0.8 0.6" pos="1 -2 0.6" quat="0.866 0 0.5 0" rgba="0.7 0.5 0.3 1"/>
            <geom name="rock6" type="box" size="1.1 0.7 0.4" pos="-2 4 0.4" quat="0.5 0.5 0.707 0" rgba="0.4 0.3 0.3 1"/>
            <geom name="rock7" type="box" size="0.7 0.7 0.2" pos="4 -4 0.2" quat="0.382 0.923 0 0" rgba="0.6 0.4 0.3 1"/>
            <geom name="rock8" type="box" size="0.9 0.9 0.5" pos="-6 3 0.5" quat="0.707 0 0.707 0" rgba="0.5 0.4 0.2 1"/>
            <geom name="rock9" type="box" size="1.3 0.5 0.4" pos="3 3 0.4" quat="0.866 0.5 0 0" rgba="0.5 0.3 0.3 1"/>
            <geom name="rock10" type="box" size="1.5 1.0 0.6" pos="-3 -2 0.6" quat="0.707 0.707 0 0" rgba="0.6 0.4 0.2 1"/>
        <!-- Robot base with free joint -->
        <body name="base" pos="0 0 0.01">
            <inertial pos="0 0 0" mass="10.0" diaginertia="0.1 0.1 0.1"/>
            <joint name="base_free" type="free"/>
            <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="base_link"/>

            <!-- Robot components -->
            <body name="backrightlink" pos="-0.044464 -0.015725 0.05" quat="0.820538 0.273512 -0.158716 -0.476149">
                <inertial pos="-0.000230498 -0.0259489 0.0454514" quat="0.628624 0.777697 -0.00340079 -0.00280565" mass="0.00735328" diaginertia="2.06921e-06 1.28265e-06 8.58253e-07"/>
                <joint name="backrightjoint" pos="0 0 0" axis="0 0 1" range="-0.524 1.571" actuatorfrcrange="-0.42 0.42"/>
                <geom type="mesh" rgba="1 0 0 1" mesh="backrightlink"/>
            </body>

            <body name="backleftlink" pos="-0.058724 0.022973 0.05" quat="0.476146 0.158715 -0.273513 -0.82054">
                <inertial pos="3.53889e-05 -0.0259499 0.0196231" quat="0.62863 0.777704 0.000583499 0.000414911" mass="0.00735328" diaginertia="2.06921e-06 1.28265e-06 8.58253e-07"/>
                <joint name="backleftjoint" pos="0 0 0" axis="0 0 1" range="-1.571 0.524" actuatorfrcrange="-0.42 0.42"/>
                <geom type="mesh" rgba="1 0 0 1" mesh="backleftlink"/>
            </body>

            <body name="frontrighthiplink" pos="0.088599 0.007262 0.05" quat="0.613891 0.35091 -0.613893 0.350907">
                <inertial pos="0.000477612 -0.0269624 0.0548139" quat="0.990877 -0.125716 -0.000887173 -0.0485622" mass="0.0214873" diaginertia="3.29218e-06 2.49101e-06 2.10494e-06"/>
                <joint name="frontrighthipjoint" pos="0 0 0" axis="0 -5.7115e-05 1" range="-1.22 1.571" actuatorfrcrange="-0.42 0.42"/>
                <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="frontrighthiplink"/>
                <body name="frontrightflipperlink" pos="-0.011447 -0.026757 0.064797" quat="0.00296594 0.707095 0.00410249 0.707101">
                    <inertial pos="0.0627381 0.0025922 0.0125462" quat="0.501508 0.494858 0.498397 0.505179" mass="0.0291756" diaginertia="2.30001e-05 1.95463e-05 3.82772e-06"/>
                    <joint name="frontrightflipperjoint" pos="0 0 0" axis="-0.00397829 0.394849 0.918737" range="-0.34 1.571" actuatorfrcrange="-0.42 0.42"/>
                    <geom type="mesh" rgba="1 0 0 1" mesh="frontrightflipperlink"/>
                </body>
            </body>

            <body name="frontlefthiplink" pos="0.072097 0.02037 0.05" quat="0.68222 -0.682222 -0.185942 0.185941">
                <inertial pos="0.0271358 -0.00074823 0.0228334" quat="0.73992 -0.0891628 -0.0922786 0.660343" mass="0.0214873" diaginertia="3.29236e-06 2.49208e-06 2.10369e-06"/>
                <joint name="frontlefthipjoint" pos="0 0 0" axis="0 0 -1" range="-1.571 1.22" actuatorfrcrange="-0.42 0.42"/>
                <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="frontlefthiplink"/>
                <body name="frontleftflipperlink" pos="0.029345 -0.0003733 0.032817" quat="0.496813 0.503165 -0.496815 0.503167">
                    <inertial pos="0.0590079 -0.000759462 0.000119837" quat="0.506667 0.499947 0.493291 0.500005" mass="0.0291756" diaginertia="2.30001e-05 1.95463e-05 3.82772e-06"/>
                    <joint name="frontleftflipperjoint" pos="0 0 0" axis="0 0 1" range="-1.571 0.34" actuatorfrcrange="-0.42 0.42"/>
                    <geom type="mesh" rgba="1 0.921569 0.780392 1" mesh="frontleftflipperlink"/>
                </body>
            </body>
        </body>
    </worldbody>
</mujoco>
